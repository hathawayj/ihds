<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<title>India Human Development Survey (IHDS)</title>

<script src="index_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="index_files/bootstrap-3.3.6/css/bootstrap.min.css" rel="stylesheet" />
<script src="index_files/bootstrap-3.3.6/js/bootstrap.min.js"></script>
<script src="index_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<script src="index_files/navigation-1.1/tabsets.js"></script>
<script src="index_files/navigation-1.1/codefolding.js"></script>
<link href="index_files/magnific-popup-1.1.0/magnific-popup.css" rel="stylesheet" />
<script src="index_files/magnific-popup-1.1.0/jquery.magnific-popup.min.js"></script>
<link href="index_files/clean-0.1/clean.css" rel="stylesheet" />
<script src="index_files/clean-0.1/clean.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #ffffff; color: #1f1c1b; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; background-color: #ffffff; color: #a0a0a0; border-right: 1px solid #a0a0a0; }
td.sourceCode { padding-left: 5px; }
pre, code { color: #1f1c1b; background-color: #ffffff; }
code > span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code > span.dt { color: #0057ae; } /* DataType */
code > span.dv { color: #b08000; } /* DecVal */
code > span.bn { color: #b08000; } /* BaseN */
code > span.fl { color: #b08000; } /* Float */
code > span.cn { color: #aa5500; } /* Constant */
code > span.ch { color: #924c9d; } /* Char */
code > span.sc { color: #3daee9; } /* SpecialChar */
code > span.st { color: #bf0303; } /* String */
code > span.vs { color: #bf0303; } /* VerbatimString */
code > span.ss { color: #ff5500; } /* SpecialString */
code > span.im { color: #ff5500; } /* Import */
code > span.co { color: #898887; } /* Comment */
code > span.do { color: #607880; } /* Documentation */
code > span.an { color: #ca60ca; } /* Annotation */
code > span.cv { color: #0095ff; } /* CommentVar */
code > span.ot { color: #006e28; } /* Other */
code > span.fu { color: #644a9b; } /* Function */
code > span.va { color: #0057ae; } /* Variable */
code > span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code > span.op { color: #1f1c1b; } /* Operator */
code > span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code > span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code > span.pp { color: #006e28; } /* Preprocessor */
code > span.at { color: #0057ae; } /* Attribute */
code > span.re { color: #0057ae; } /* RegionMarker */
code > span.in { color: #b08000; } /* Information */
code > span.wa { color: #bf0303; } /* Warning */
code > span.al { color: #bf0303; font-weight: bold; } /* Alert */
code > span.er { color: #bf0303; text-decoration: underline; } /* Error */
code > span. { color: #1f1c1b; } /* Normal */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
<div class="container-fluid main-container">
  <div class="row">
     <div class="col-md-10">



<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="text-muted">Code</span> <span class="text-muted caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All</a></li>
</ul>
</div>

<div id="header">
<h1 class="title">India Human Development Survey (IHDS)</h1>
</div>

<div id="content">
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<div id="visualization" class="section level2">
<h2>Visualization</h2>
<p>The visualizations below provide an example of using <a href="https://www.r-project.org/" target="blank">R</a> to summarize and visualize anthropometric data and other household data that was collected in India during the <a href="https://www.ihds.umd.edu/" target="blank">IHDS study</a>. The scripts used to get and create the data for the visualizaings below can be found <a href="https://github.com/hathawayj/ihds/tree/master/scripts" target="blank">here</a>. The IHDS can be downloaded from <a href="https://www.icpsr.umich.edu/icpsrweb/DSDR/series/507" target="blank">the ICPSR</a>.</p>
<ul>
<li><strong><a href="https://github.com/hathawayj/ihds/tree/master/scripts" target="blank">data download and format scripts</a></strong></li>
</ul>
</div>
<div id="tidyicpsr" class="section level2">
<h2>tidyICPSR</h2>
<p>We have developed an R package called <a href="https://github.com/hathawayj/tidyICPSR" target="blank">tidyICPSR</a> that provides functionality to get the two studies downloaded and formatted into a <a href="http://garrettgman.github.io/tidying/" target="blank">tidy format</a> where all column values are transformed into correct variable values. The full column names can be used as well. The package is still in early development and is currently meant more for a proof of concept and could be helpful for those that would like to use R with the data from ICPSR.</p>
<ul>
<li><strong><a href="https://hathawayj.github.io/ihds/index.Rmd">Rmd file that created this page</a></strong></li>
<li><strong>Use the’ ‘Code’ buttons to see the code to generate the graphic</strong></li>
</ul>
</div>
</div>
<div id="ihds-exploration-individual" class="section level1">
<h1>2011 IHDS Exploration (Individual)</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#devtools::install_github(&quot;hathawayj/tidyICPSR&quot;)</span>
<span class="co">#install.packages(&quot;pacman&quot;)</span>
pacman<span class="op">::</span><span class="kw">p_load</span>(knitr, rmdformats, tidyverse, ggthemes, forcats, geofacet, tidyICPSR, growthstandards)
ind11 &lt;-<span class="st"> </span><span class="kw">read_rds</span>(<span class="dt">path =</span> <span class="st">&quot;../data/artifacts/2011_36151_India.Rds&quot;</span>)


### Build data items for plots
### 

dat &lt;-<span class="st"> </span>ind11 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">stateid =</span> <span class="kw">str_remove_all</span>(stateid, <span class="st">&quot; [:digit:]+&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">           </span><span class="kw">str_replace_all</span>(<span class="st">&quot;&amp;&quot;</span>, <span class="st">&quot;and&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_replace_all</span>(<span class="st">&quot;Orissa&quot;</span>, <span class="st">&quot;Odisha&quot;</span>),
         <span class="dt">ro3 =</span> <span class="kw">str_remove_all</span>(ro3, <span class="st">&quot; [:digit:]+&quot;</span>), <span class="dt">ro3 =</span> <span class="kw">str_remove_all</span>(ro3, <span class="st">&quot;;&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(idperson, stateid, hhid, distid, psuid, hhsplitid, idhh, 
         <span class="dt">anthro_id =</span> ap3, <span class="dt">age =</span> ro5, <span class="dt">height1 =</span> ap5, <span class="dt">height2 =</span> ap6, 
         <span class="dt">anthro_position =</span> ap7, <span class="dt">weight1 =</span> ap8, <span class="dt">weight2 =</span> ap9, 
         <span class="dt">sex =</span> ro3, <span class="dt">relation_head =</span> ro4, <span class="dt">diarrhea =</span> sm7, 
         <span class="dt">hours_work_year =</span> wkhours, <span class="dt">annual_wages =</span> wsearn)

household &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(hhid, stateid, distid, psuid, hhsplitid, idhh) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n</span>(), <span class="dt">children =</span> <span class="kw">sum</span>(age <span class="op">&lt;=</span><span class="st"> </span><span class="dv">18</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), 
            <span class="dt">household_wages =</span> <span class="kw">sum</span>(annual_wages, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
            <span class="dt">household_hours =</span> <span class="kw">sum</span>(hours_work_year, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ungroup</span>()


kids &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(age <span class="op">&lt;=</span><span class="st"> </span><span class="dv">5</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">left_join</span>(household)</code></pre></div>
<div id="household-income" class="section level2">
<h2>Household Income</h2>
<p>The household income numbers are close to the other reports we found. The median household income from this study data is 31828 NRP.</p>
<ul>
<li><a href="https://cmie.com/kommon/bin/sr.php?kall=warticle&amp;dt=2016-07-04%2013:45:29&amp;msec=170">https://cmie.com/kommon/bin/sr.php?kall=warticle&amp;dt=2016-07-04%2013:45:29&amp;msec=170</a></li>
<li><a href="https://www.quora.com/What-is-the-median-income-of-households-in-different-states-of-India" class="uri">https://www.quora.com/What-is-the-median-income-of-households-in-different-states-of-India</a></li>
</ul>
<p>The graphic below shows the median (dot) and the 25th and 75th percentiles (linerange) of household income for each region of India.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">household <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">stateid =</span> <span class="kw">fct_reorder</span>(stateid, household_wages, median)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(stateid) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">p25 =</span> <span class="kw">quantile</span>(household_wages, .<span class="dv">25</span>), <span class="dt">median =</span> <span class="kw">median</span>(household_wages), <span class="dt">p75 =</span> <span class="kw">quantile</span>(household_wages, .<span class="dv">75</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">y =</span> median<span class="op">/</span><span class="dv">10000</span>, <span class="dt">x =</span> stateid)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_pointrange</span>(<span class="kw">aes</span>(<span class="dt">ymin =</span> p25<span class="op">/</span><span class="dv">10000</span>, <span class="dt">ymax =</span> p75<span class="op">/</span><span class="dv">10000</span>)) <span class="op">+</span>
<span class="co"># geom_vline(aes(xintercept = median), data = state_labels) +</span>
<span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Household income (10,000 INR)&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Region&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Distribution of Household Income&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>(), <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">vjust =</span> <span class="dv">1</span>, <span class="dt">hjust =</span> <span class="dv">1</span>))  </code></pre></div>
<p><img src="index_files/figure-html/income_viz_box-1.png" width="768" /></p>
<p>Below we have displayed the household income (x-axis), and the line shows the proportion of households from the study at a given income. As of this work <a href="https://www.google.com/search?q=100000+INR+to+dollars&amp;oq=100000+INR+to+dollars&amp;aqs=chrome..69i57.6348j1j9&amp;sourceid=chrome&amp;ie=UTF-8" target="blank">100,000 INR converts to ~$1500</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">f90 &lt;-<span class="st"> </span><span class="cf">function</span>(x){ <span class="kw">quantile</span>(x, .<span class="dv">9</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)}

state_labels &lt;-<span class="st"> </span>household <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">stateid =</span> <span class="kw">fct_reorder</span>(stateid, household_wages, f90)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(stateid) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">sum_n =</span> <span class="kw">sum</span>(n), <span class="dt">mean =</span> <span class="kw">mean</span>(household_wages, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), 
            <span class="dt">median =</span> <span class="kw">median</span>(household_wages, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), 
            <span class="dt">p90 =</span> <span class="kw">quantile</span>(household_wages, .<span class="dv">9</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
            <span class="dt">p10 =</span> <span class="kw">quantile</span>(household_wages, .<span class="dv">1</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ungroup</span>()


household <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">stateid =</span> <span class="kw">fct_reorder</span>(stateid, household_wages, f90)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> household_wages<span class="op">/</span><span class="dv">100000</span>)) <span class="op">+</span>
<span class="st">  </span><span class="co"># geom_rect(data = state_labels, aes(fill = p90),</span>
<span class="st">  </span><span class="co">#   xmin = -Inf, ymin = -Inf, xmax = Inf, ymax = Inf, alpha = 0.5,</span>
<span class="st">  </span><span class="co">#   inherit.aes = FALSE) +</span>
<span class="st">  </span><span class="kw">stat_ecdf</span>(<span class="dt">geom =</span> <span class="st">&quot;step&quot;</span>, <span class="dt">pad =</span> <span class="ot">TRUE</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_cartesian</span>(<span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">10</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dt">by =</span> <span class="dv">2</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dt">by =</span> .<span class="dv">2</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">color =</span> <span class="st">&quot;darkgrey&quot;</span>, <span class="dt">yintercept =</span> <span class="kw">c</span>(.<span class="dv">9</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">data =</span> state_labels, <span class="kw">aes</span>(<span class="dt">xintercept =</span> p90<span class="op">/</span><span class="dv">100000</span>), <span class="dt">color =</span> <span class="st">&quot;darkgrey&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Household income (100,000 INR)&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Proportion&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Distribution of Household Income&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>stateid, <span class="dt">labeller =</span> <span class="kw">labeller</span>(<span class="dt">stateid =</span> <span class="kw">label_wrap_gen</span>(<span class="dv">10</span>)), <span class="dt">nrow =</span> <span class="dv">6</span>) </code></pre></div>
<p><img src="index_files/figure-html/income_viz-1.png" width="768" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#  facet_geo(~stateid, grid = india_grid2, labeller = labeller(stateid = label_wrap_gen(10))) </span></code></pre></div>
</div>
<div id="household-size" class="section level2">
<h2>Household Size</h2>
<p>The household count numbers seem to make sense based on numbers reported at the following links. The median household size from this study data is 5. There is not much exciting in the below graphic.</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Indian_states_ranking_by_household_size" class="uri">https://en.wikipedia.org/wiki/Indian_states_ranking_by_household_size</a></li>
<li><a href="http://www.arcgis.com/home/item.html?id=6cf22970ea8c4b338a196879397a76e4" class="uri">http://www.arcgis.com/home/item.html?id=6cf22970ea8c4b338a196879397a76e4</a></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">household <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">stateid =</span> <span class="kw">fct_reorder</span>(stateid, n, median)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(stateid) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">p25 =</span> <span class="kw">quantile</span>(n, .<span class="dv">25</span>), <span class="dt">median =</span> <span class="kw">median</span>(n), <span class="dt">p75 =</span> <span class="kw">quantile</span>(n, .<span class="dv">75</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">y =</span> median, <span class="dt">x =</span> stateid)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_pointrange</span>(<span class="kw">aes</span>(<span class="dt">ymin =</span> p25, <span class="dt">ymax =</span> p75)) <span class="op">+</span>
<span class="co"># geom_vline(aes(xintercept = median), data = state_labels) +</span>
<span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Number in household&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Region&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Distribution of Household Size&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">30</span>, <span class="dt">by =</span> <span class="dv">5</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">15</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>(), <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">45</span>, <span class="dt">vjust =</span> <span class="dv">1</span>, <span class="dt">hjust =</span> <span class="dv">1</span>))  </code></pre></div>
<p><img src="index_files/figure-html/size_viz_box-1.png" width="768" /></p>
</div>
<div id="one-to-four-years-old-height-distributions" class="section level2">
<h2>One to four years old height distributions</h2>
<p>Some data quality issues will require further investigation for the heights. We have converted the heights into Z-scores (HAZ) using <code>growthstandards::who_htmc2zscore()</code>. The ages are grouped by year in the data so the HAZ values will be much more variable than usual as some of the values could be off by as much as 364 days.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Household heights by age</span>
kids <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(age <span class="op">&lt;</span><span class="st"> </span><span class="dv">5</span>, age <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">age =</span> <span class="kw">ifelse</span>(age <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, .<span class="dv">5</span>, age),
    <span class="dt">zscore =</span> <span class="kw">who_htcm2zscore</span>(<span class="dt">agedays =</span> .<span class="op">$</span>age<span class="op">*</span><span class="fl">365.25</span> , <span class="dt">htcm =</span> .<span class="op">$</span>height2, <span class="dt">sex =</span> .<span class="op">$</span>sex ), 
    <span class="dt">stateid =</span> <span class="kw">fct_reorder</span>(stateid, zscore, median, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">y =</span> zscore, <span class="dt">x =</span> <span class="kw">factor</span>(age)), <span class="dt">fill =</span> <span class="st">&quot;darkgrey&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">height =</span> <span class="dv">0</span>, <span class="dt">width =</span> .<span class="dv">25</span>, <span class="dt">alpha =</span> .<span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">fill =</span> <span class="ot">NA</span>, <span class="dt">color =</span> <span class="st">&quot;limegreen&quot;</span>, <span class="dt">outlier.colour =</span> <span class="ot">NA</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_brewer</span>(<span class="dt">type =</span> <span class="st">&quot;qual&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_cartesian</span>(<span class="dt">ylim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">7</span>, <span class="dv">7</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Height (ft)&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Age&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;Distribution of height by age group&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>stateid)</code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-1-1.png" width="768" /></p>
</div>
<div id="year-old-heights-by-income-category" class="section level2">
<h2>0-1-year-old heights by income category</h2>
<p>Since the HAZ values are very sensitive to incorrect age day values, we show the heights of those labeled as zero years old. Remember that this figure shows all newborns from 0-365 days.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Household heights by age</span>
kids <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(age <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">stateid =</span> <span class="kw">fct_reorder</span>(stateid, height2, median, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">y =</span> height2, <span class="dt">x =</span> stateid), <span class="dt">fill =</span> <span class="st">&quot;darkgrey&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">height =</span> <span class="dv">0</span>, <span class="dt">width =</span> .<span class="dv">25</span>, <span class="dt">alpha =</span> .<span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">fill =</span> <span class="ot">NA</span>, <span class="dt">color =</span> <span class="st">&quot;limegreen&quot;</span>, <span class="dt">outlier.colour =</span> <span class="ot">NA</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_brewer</span>(<span class="dt">type =</span> <span class="st">&quot;qual&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Height (cm)&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Region&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;&lt; 1 year heights&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_flip</span>()</code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-2-1.png" width="576" /></p>
<!-- ## Under 5 years old weight distributions -->
<!-- Some data quality issues will require further investigation. -->
<!-- ```{r, fig.height=16, fig.width = 12} -->
<!-- kids %>% -->
<!--   filter(age <= 5) %>% -->
<!--   ggplot(aes(y = weight2 * 2.20462, x = factor(age)), fill = "darkgrey") + -->
<!--   geom_boxplot() + -->
<!--   #  geom_jitter(aes(color = sex), alpha = .5, width = .25) + -->
<!--   facet_geo(~stateid, grid = india_grid2) + -->
<!--   theme_bw() + -->
<!--   scale_color_brewer(type = "qual") + -->
<!--   coord_cartesian(ylim = c(0, 45)) + -->
<!--   labs(y = "weight (lbs)", x = "gender", color = "gender", title = "Distribution of height by age group") -->
<!-- ``` -->
<!-- ## 0-1-year-old weights by income category -->
<!-- Remember that this figure shows all newborns from 0-12 months. -->
<!-- ```{r, fig.height=16, fig.width = 12} -->
<!-- kids %>% -->
<!--   filter(age <= 1) %>% -->
<!--   mutate(income_groups =  -->
<!--            case_when( household_wages/ 10000 <= 2.5 ~ "less than 25k", -->
<!--                       household_wages/ 10000 <= 5 ~ "between 25k & 50k", -->
<!--                       household_wages/ 10000 <= 10 ~ "between 50k & 100k", -->
<!--                       household_wages/ 10000 <= 25 ~ "between 100k & 250k", -->
<!--                       household_wages/ 10000 > 25 ~ "greater than 250k")) %>% -->
<!--   ggplot(aes(y = weight2 * 2.200462, x = income_groups)) + -->
<!--   scale_y_continuous(limits = c(0, 25)) +  -->
<!--   geom_boxplot() + -->
<!--   labs(x = "Household wages (INR)", y = "weight (lbs)") + -->
<!--   coord_flip() + -->
<!--   theme_bw() -->
<!-- ``` -->
<!-- ```{r, fig.height=16, fig.width = 12} -->
<!-- kids %>% -->
<!--   filter(age <= 1) %>% -->
<!--   mutate(income_groups =  -->
<!--            case_when( household_wages/ 10000 <= 2.5 ~ "less than 25k", -->
<!--                       household_wages/ 10000 <= 5 ~ "between 25k & 50k", -->
<!--                       household_wages/ 10000 <= 10 ~ "between 50k & 100k", -->
<!--                       household_wages/ 10000 <= 25 ~ "between 100k & 250k", -->
<!--                       household_wages/ 10000 > 25 ~ "greater than 250k")) %>% -->
<!--   ggplot(aes(y = weight2 * 2.200462, x = income_groups)) + -->
<!--   scale_y_continuous(limits = c(0, 25)) +  -->
<!--   geom_boxplot() + -->
<!--   facet_geo(~stateid, grid = india_grid2) + -->
<!--   labs(x = "Household wages (INR)", y = "weight (lbs)") + -->
<!--   coord_flip() + -->
<!--   theme_bw() -->
<!-- ``` -->
</div>
</div>
<div id="ihds-exploration-births" class="section level1">
<h1>2011 IHDS Exploration (Births)</h1>
<div id="distribution-of-number-of-births-per-household" class="section level2">
<h2>Distribution of number of births per household</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span><span class="kw">read_rds</span>(<span class="dt">path =</span> <span class="st">&quot;../data/artifacts/2011_36151_India_births.Rds&quot;</span>)


dat <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(idhh, stateid, mother_id) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">births =</span> <span class="kw">max</span>(nbirths)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">stateid =</span> <span class="kw">fct_reorder</span>(stateid, births, quantile, <span class="dt">probs =</span> .<span class="dv">75</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> stateid, <span class="dt">y =</span> births)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Births per Mother&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Region&quot;</span>)</code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-4-1.png" width="576" /></p>
</div>
</div>
<div id="ihds-data-prep" class="section level1">
<h1>IHDS Data Prep</h1>
<p>The development R package <a href="">tidyICPSR</a> has the functions used to download and prep the data.</p>
</div>
<div id="code" class="section level1">
<h1>Code</h1>
<p>All of the R code to download, process, and replicate this analysis (including the code that generates this document) is available <a href="https://github.com/hathawayj/ihds">here</a>.</p>
</div>
</div>


    </div>
    <div class="col-md-2">
      <div id="toc">
      	<button type="button" class="close">×</button>
        <ul>
        <li><a href="#introduction">Introduction</a><ul>
        <li><a href="#visualization">Visualization</a></li>
        <li><a href="#tidyicpsr">tidyICPSR</a></li>
        </ul></li>
        <li><a href="#ihds-exploration-individual">2011 IHDS Exploration (Individual)</a><ul>
        <li><a href="#household-income">Household Income</a></li>
        <li><a href="#household-size">Household Size</a></li>
        <li><a href="#one-to-four-years-old-height-distributions">One to four years old height distributions</a></li>
        <li><a href="#year-old-heights-by-income-category">0-1-year-old heights by income category</a></li>
        </ul></li>
        <li><a href="#ihds-exploration-births">2011 IHDS Exploration (Births)</a><ul>
        <li><a href="#distribution-of-number-of-births-per-household">Distribution of number of births per household</a></li>
        </ul></li>
        <li><a href="#ihds-data-prep">IHDS Data Prep</a></li>
        <li><a href="#code">Code</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

<script>
$(document).ready(function () {

  // add bootstrap table styles to pandoc tables
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');

});
</script>

<script>
$(document).ready(function () {
 	    $('#content img')
 	  .addClass("image-lb");
  $('#content').magnificPopup({
	      type:'image',
	      closeOnContentClick: false,
	      delegate: 'img',
	      gallery: {enabled: false },
	      image: {
	        verticalFit: true,
          titleSrc: 'alt'
	      }
 	    });
 	});
</script>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
